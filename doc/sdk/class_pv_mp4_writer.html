<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
		<title>PvMp4Writer Class Reference</title>
		<link href="doxygen.css" rel="stylesheet" type="text/css">
		<link href="tabs.css" rel="stylesheet" type="text/css">
	</head>
	<body>
	<div class="contents">
		<div class="textblock">
			<h2><a href="http://www.pleora.com" target="_blank"><img src="logo.jpg" alt="Pleora Technologies Inc." align="middle" border="0"></a>
			eBUS SDK v5.1.10.4642 API</h2>
		</div>
	</div>
	<br>
	<br>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_pv_mp4_writer.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_pv_mp4_writer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PvMp4Writer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Performs H.264 encoding and writing to an MP4 container from PvBuffers.  
 <a href="class_pv_mp4_writer.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5fdb074a08d7a2d960845b31faf11c07"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fdb074a08d7a2d960845b31faf11c07"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a5fdb074a08d7a2d960845b31faf11c07">PvMp4Writer</a> ()</td></tr>
<tr class="memdesc:a5fdb074a08d7a2d960845b31faf11c07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a5fdb074a08d7a2d960845b31faf11c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2483bfa18335882e3cdb996b24352b10"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2483bfa18335882e3cdb996b24352b10"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a2483bfa18335882e3cdb996b24352b10">~PvMp4Writer</a> ()</td></tr>
<tr class="memdesc:a2483bfa18335882e3cdb996b24352b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a2483bfa18335882e3cdb996b24352b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba15ff81c7914739ffcecb2984a43dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#afba15ff81c7914739ffcecb2984a43dc">IsAvailable</a> () const </td></tr>
<tr class="memdesc:afba15ff81c7914739ffcecb2984a43dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if H.264 encoding and MP4 output is supported on the system.  <a href="#afba15ff81c7914739ffcecb2984a43dc">More...</a><br /></td></tr>
<tr class="separator:afba15ff81c7914739ffcecb2984a43dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f96c2b972a98c9bc7dc7a150af8883b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a9f96c2b972a98c9bc7dc7a150af8883b">IsOpened</a> ()</td></tr>
<tr class="memdesc:a9f96c2b972a98c9bc7dc7a150af8883b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the writer is already opened.  <a href="#a9f96c2b972a98c9bc7dc7a150af8883b">More...</a><br /></td></tr>
<tr class="separator:a9f96c2b972a98c9bc7dc7a150af8883b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a924919551b1ec2970475e494106e4330"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_pv_result.html">PvResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a924919551b1ec2970475e494106e4330">Open</a> (const <a class="el" href="class_pv_string.html">PvString</a> &amp;aFilename, <a class="el" href="class_pv_image.html">PvImage</a> *aImage)</td></tr>
<tr class="memdesc:a924919551b1ec2970475e494106e4330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the writer.  <a href="#a924919551b1ec2970475e494106e4330">More...</a><br /></td></tr>
<tr class="separator:a924919551b1ec2970475e494106e4330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb96012a9e095d52c5ba7da6f3bed0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_pv_result.html">PvResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a7eb96012a9e095d52c5ba7da6f3bed0a">WriteFrame</a> (<a class="el" href="class_pv_image.html">PvImage</a> *aImage, uint32_t *aFileSizeDelta)</td></tr>
<tr class="memdesc:a7eb96012a9e095d52c5ba7da6f3bed0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a frame to the MP4 file.  <a href="#a7eb96012a9e095d52c5ba7da6f3bed0a">More...</a><br /></td></tr>
<tr class="separator:a7eb96012a9e095d52c5ba7da6f3bed0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715704a13ddc61ea830e3046cd7b8ea8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_pv_result.html">PvResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a715704a13ddc61ea830e3046cd7b8ea8">Close</a> ()</td></tr>
<tr class="memdesc:a715704a13ddc61ea830e3046cd7b8ea8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the writer.  <a href="#a715704a13ddc61ea830e3046cd7b8ea8">More...</a><br /></td></tr>
<tr class="separator:a715704a13ddc61ea830e3046cd7b8ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f5c3cfc6629c9ad22ebbe7dd81d0018"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a4f5c3cfc6629c9ad22ebbe7dd81d0018">GetAvgBitrate</a> () const </td></tr>
<tr class="memdesc:a4f5c3cfc6629c9ad22ebbe7dd81d0018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the average bitrate the writer is configured with.  <a href="#a4f5c3cfc6629c9ad22ebbe7dd81d0018">More...</a><br /></td></tr>
<tr class="separator:a4f5c3cfc6629c9ad22ebbe7dd81d0018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb499825a8dcac1defcd8c2446bb0c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_pv_result.html">PvResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#abeb499825a8dcac1defcd8c2446bb0c4">SetAvgBitrate</a> (uint32_t aValue)</td></tr>
<tr class="memdesc:abeb499825a8dcac1defcd8c2446bb0c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the average bitrate of H.264 encoding for the writer.  <a href="#abeb499825a8dcac1defcd8c2446bb0c4">More...</a><br /></td></tr>
<tr class="separator:abeb499825a8dcac1defcd8c2446bb0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5c5bd18aa5a6238c8bf7f1ee1eecac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#a0e5c5bd18aa5a6238c8bf7f1ee1eecac">GetLastError</a> (<a class="el" href="class_pv_string.html">PvString</a> &amp;aString) const </td></tr>
<tr class="memdesc:a0e5c5bd18aa5a6238c8bf7f1ee1eecac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last error that occured with the MP4 writer.  <a href="#a0e5c5bd18aa5a6238c8bf7f1ee1eecac">More...</a><br /></td></tr>
<tr class="separator:a0e5c5bd18aa5a6238c8bf7f1ee1eecac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3cd541f532069f44ad843757585b163"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3cd541f532069f44ad843757585b163"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pv_mp4_writer.html#ad3cd541f532069f44ad843757585b163">ResetLastError</a> ()</td></tr>
<tr class="memdesc:ad3cd541f532069f44ad843757585b163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the last error reported by the object. <br /></td></tr>
<tr class="separator:ad3cd541f532069f44ad843757585b163"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs H.264 encoding and writing to an MP4 container from PvBuffers. </p>
<p>Call Open with the first image and filename, call write for every buffer (including the first one) and finilize using the Close method. The MP4 file will not be valid until/unless the Close method (or descructor) is executed.</p>
<p>On Windows the Media Foundation H.264 encoder is used. Please refer to Microsoft documentation for image size, frame rate and other limitations when using this class or when using it from eBUS Player. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a715704a13ddc61ea830e3046cd7b8ea8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pv_result.html">PvResult</a> PvMp4Writer::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the writer. </p>
<dl class="section return"><dt>Returns</dt><dd>Includes:<ul>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca70710a0a7cc21fcba9e37b910e73c4c9">PvResult::Code::OK</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca75f3849bb9840c5af2c3cf303983aac4">PvResult::Code::NOT_SUPPORTED</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca57f682171369be7611392e0fe458de73">PvResult::Code::NOT_INITIALIZED</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caaea66673c270a1677db8b884d37681b6">PvResult::Code::GENERIC_ERROR</a> for system errors, see error description for more information </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a4f5c3cfc6629c9ad22ebbe7dd81d0018"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t PvMp4Writer::GetAvgBitrate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the average bitrate the writer is configured with. </p>
<dl class="section return"><dt>Returns</dt><dd>Average bitrate. </dd></dl>

</div>
</div>
<a class="anchor" id="a0e5c5bd18aa5a6238c8bf7f1ee1eecac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PvMp4Writer::GetLastError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_pv_string.html">PvString</a> &amp;&#160;</td>
          <td class="paramname"><em>aString</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the last error that occured with the MP4 writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">aString</td><td>String where the last error description is copied. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afba15ff81c7914739ffcecb2984a43dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PvMp4Writer::IsAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if H.264 encoding and MP4 output is supported on the system. </p>
<dl class="section return"><dt>Returns</dt><dd>True if supported, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a9f96c2b972a98c9bc7dc7a150af8883b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PvMp4Writer::IsOpened </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the writer is already opened. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the writer is already opened, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a924919551b1ec2970475e494106e4330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pv_result.html">PvResult</a> PvMp4Writer::Open </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_pv_string.html">PvString</a> &amp;&#160;</td>
          <td class="paramname"><em>aFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_pv_image.html">PvImage</a> *&#160;</td>
          <td class="paramname"><em>aImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aFilename</td><td>The filename of the MP4: full path including the mp4 extension. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">aImage</td><td>Image similar in width, height and pixel format to the stream to encode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Includes:<ul>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca70710a0a7cc21fcba9e37b910e73c4c9">PvResult::Code::OK</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caa01691a7ea2f9fd92fb720c5477bcda1">PvResult::Code::INVALID_PARAMETER</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca75f3849bb9840c5af2c3cf303983aac4">PvResult::Code::NOT_SUPPORTED</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caaea66673c270a1677db8b884d37681b6">PvResult::Code::GENERIC_ERROR</a> for system errors, see error description for more information </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="abeb499825a8dcac1defcd8c2446bb0c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pv_result.html">PvResult</a> PvMp4Writer::SetAvgBitrate </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>aValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the average bitrate of H.264 encoding for the writer. </p>
<p>The average bitrate must be set before opening the writer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aValue</td><td>The new average bitrate value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Includes:<ul>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca70710a0a7cc21fcba9e37b910e73c4c9">PvResult::Code::OK</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caa01691a7ea2f9fd92fb720c5477bcda1">PvResult::Code::INVALID_PARAMETER</a> </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a7eb96012a9e095d52c5ba7da6f3bed0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pv_result.html">PvResult</a> PvMp4Writer::WriteFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_pv_image.html">PvImage</a> *&#160;</td>
          <td class="paramname"><em>aImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>aFileSizeDelta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a frame to the MP4 file. </p>
<p>Note: the image used to open the writer is not encoded or written to the file. If you are using the first image to open the file, you need to call WriteFrame with the same image as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">aImage</td><td>Image to encode to H.264 and write to the MP4 file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">aFileSizeDelta</td><td>Pointer to an integer where the file size delta for encoding/writing this frame is written (optional, NULL if not needed)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Includes:<ul>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca70710a0a7cc21fcba9e37b910e73c4c9">PvResult::Code::OK</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caa01691a7ea2f9fd92fb720c5477bcda1">PvResult::Code::INVALID_PARAMETER</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca75f3849bb9840c5af2c3cf303983aac4">PvResult::Code::NOT_SUPPORTED</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7ca57f682171369be7611392e0fe458de73">PvResult::Code::NOT_INITIALIZED</a></li>
<li><a class="el" href="struct_pv_result_1_1_code.html#af1274e2b903976bfd04c45b84341ec7caaea66673c270a1677db8b884d37681b6">PvResult::Code::GENERIC_ERROR</a> for system errors, see error description for more information </li>
</ul>
</dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_pv_mp4_writer_8h_source.html">PvMp4Writer.h</a></li>
<li>PvMp4Writer.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<hr size="1">
<P><B>Copyright (c) 2002-2018 Pleora Technologies Inc.</B><BR>
<a href="http://www.pleora.com" target="_blank">www.pleora.com</a></P>
</body>
</html>
